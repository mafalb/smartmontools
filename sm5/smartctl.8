\# Copyright (C) 2002-3 Bruce Allen <smartmontools-support@lists.sourceforge.net>
\#
\# $Id: smartctl.8,v 1.75 2003/07/22 14:08:58 ballen4705 Exp $
\# 
\# This program is free software; you can redistribute it and/or modify it
\# under the terms of the GNU General Public License as published by the Free
\# Software Foundation; either version 2, or (at your option) any later
\# version.
\# 
\# You should have received a copy of the GNU General Public License (for
\# example COPYING); if not, write to the Free Software Foundation, Inc., 675
\# Mass Ave, Cambridge, MA 02139, USA.
\#
\# This code was originally developed as a Senior Thesis by Michael Cornwell
\# at the Concurrent Systems Laboratory (now part of the Storage Systems
\# Research Center), Jack Baskin School of Engineering, University of
\# California, Santa Cruz. http://ssrc.soe.ucsc.edu/
\#
.TH SMARTCTL 8  "$Date: 2003/07/22 14:08:58 $" "smartmontools-5.1"
.SH NAME
smartctl \- Control and Monitor Utility for SMART Disks
.SH SYNOPSIS
.B smartctl [options] device

.SH DESCRIPTION
.B smartctl
controls the Self-Monitoring, Analysis and Reporting Technology
(SMART) system built into many ATA-3 and later ATA, IDE and
SCSI-3 hard drives. The purpose of SMART is to monitor the
reliability of the hard drive and predict drive failures, and to carry
out different types of drive self-tests.  This version of \fB smartctl\fP is
compatible with ATA/ATAPI-5 and earlier standards (see REFERENCES
below)

.B smartctl
is a command line utility designed to perform SMART tasks such as
printing the SMART self-test and error logs, and enabling and
disabling SMART automatic testing. Note: if the user issues a
SMART command that is (apparently) not implemented by the device,
.B smartctl
will print a warning message but issue the command anyway.  This should
not cause problems: unimplemented SMART commands issued to a
drive are ignored and return an error.

.B smartctl
also provides support for polling TapeAlert messages from SCSI tape drives and changers.

The user must specify the device to be controlled or interrogated as the final
argument to
.B smartctl.
ATA devices use the form "/dev/hd*" and SCSI devices use the form "/dev/sd*".
For SCSI Tape Drives and Changers with TapeAlert support use the devices
"/dev/nst*" and "/dev/sg*".  More general paths may also be specified.
.B smartctl
will attempt to guess the device type, but the '\-d' option can be used to
specify a device type of ATA or SCSI if required.

Note that the printed output of
.B smartctl
displays most numerical values in base 10 (decimal), but some values
are displayed in base 16 (hexidecimal).  To distinguish them, the base
16 values are always displayed with a leading
.B "0x"
for example: "0xff". This man page follows the same convention.

.PP
.SH OPTIONS
.PP
The options are grouped below into several categories.
.B smartctl
will execute the corresponding commands in the order: INFORMATION,
ENABLE/DISABLE, DISPLAY DATA, RUN/ABORT TESTS.

SCSI devices only accept the options 
.B \-h, \-?, \-V, \-i, \-a, \-d, \-s, \-H, \-t, \-C, \-l selftest, \-l error
and 
.B \-X. 
TapeAlert devices only accept the options 
.B \-h, \-?, \-V, \-i, \-a, \-d, \-s, \-t, \-l selftest, \-l error
and 
.B \-H.

Long options  are  not  supported  on  all  systems.   Use
.B 'smartctl \-h'
to see the available options.

.TP
.B SHOW INFORMATION:
.TP
.B \-h, \-\-help, \-\-usage
Prints a usage message to STDOUT and exits.
.TP
.B \-?
Same as
.B \-h.
.TP
.B \-V, \-\-version, \-\-copyright, \-\-license
Prints version, copyright, license, home page and CVS-id information for your
copy of
.B smartctl
to STDOUT and then exits.  Please include this information if you are
reporting bugs or problems.
.TP
.B \-i, \-\-info
Prints the device model number, serial number, firmware version, and ATA Standard
version/revision information.  Says if the device supports SMART, and if
so, whether SMART support is currently enabled or disabled.
.TP
.B \-a, \-\-all
Prints all SMART information about the disk or TapeAlert information
about the tape drive or changer.
This is equivalent to '\-H
\-i \-c \-A \-l error \-l selftest' (for SCSI, '\-H \-i \-l error
\-l selftest').
.TP
.B RUN-TIME BEHAVIOR:
.TP
.B \-q TYPE, \-\-quietmode=TYPE
Specifies that
.B smartctl
should run in one of the two quiet modes described here.  The valid arguments
to this option are:

.I errorsonly
\- only print: For the '\-l error' option, if nonzero, the number
of errors recorded in the SMART error log and the power-on time when
they occurred; For the '\-l selftest' option, errors recorded in the device
self-test log; For the '\-H' option, SMART "disk failing" status or device
Attributes (pre-failure or usage) which failed either now or in the
past; For the '\-A' option, device Attributes (pre-failure or usage)
which failed either now or in the past.

.I silent
\- print no output.  The only way to learn about what was
found is to use the exit status of
.B smartctl
(see RETURN VALUES below).
.TP
.B \-d TYPE, \-\-device=TYPE
Specifies the type of the device.  The valid arguments to this option
are \fIata\fP and \fIscsi\fP.  If this option is not used then
.B smartctl
will attempt to guess the device type from the device name.
.TP
.B \-T TYPE, \-\-tolerance=TYPE
Specifies how tolerant
.B smartctl
should be of SMART command failures.  The valid arguments to this option
are:

.I normal
\- exit on failure of a mandatory SMART command, but not on failure of an
optional SMART command.  This is the default.  

.I conservative
\- exit on failure of any SMART command.

.I permissive
\- ignore failure of any SMART command.

Here "mandatory" means "required by the ATA/ATAPI-5 Specification if the
device implements the SMART command set" and "optional" means "not
required by the ATA/ATAPI-5 Specification even if the device implements
the SMART command set."  The 'mandatory' SMART commands are: (1)
Enable/Disable Attribute Autosave, (2) Enable/Disable SMART, and (3)
SMART Return Status.

.TP
.B \-b TYPE, \-\-badsum=TYPE
Specifies the action 
.B smartctl
should take if a checksum error is detected in the: (1) Device
Identity Structure, (2) SMART Self-Test Log Structure, (3)
SMART Attribute Value Structure, (4) SMART Attribute
Threshold Structure, or (5) ATA Error Log Structure.

The valid arguments to this option are:

.I warn
\- report the incorrect checksum but carry on in spite of it.  This is the
default.

.I exit
\- exit
.B smartctl.

.I ignore
\- continue silently without issuing a warning.

.TP
.B \-r TYPE, \-\-report=TYPE
Intended primarily to help
.B smartmontools
developers understand the behavior of
.B smartmontools
on non-conforming or poorly conforming hardware.  This option reports
details of
.B smartctl
transactions with the device.  The option can be used multiple times.
When used just once, it shows a record of the ioctl() transactions
with the device.  When used more than once, the detail of these ioctl()
transactions are reported in greater detail.  The valid arguments to
this option are:

.I ioctl
\- report all ioctl() transactions.

.I ataioctl
\- report only ioctl() transactions with ATA devices.

.I scsiioctl
\- report only ioctl() transactions with SCSI devices. Invoking this once
shows the SCSI commands in hex and the corresponding status. Invoking
it a second time adds a hex listing of the first 64 bytes of data send to, 
or received from the device.

Any argument may include a positive integer to specify the level of detail
that should be reported.  The argument should be followed by a comma then
the integer with no spaces.  For example, 
.I ataioctl,2
The default
level is 1, so '\-r ataioctl,1' and '\-r ataioctl' are equivalent.

.TP
.B SMART FEATURE ENABLE/DISABLE COMMANDS:
.IP
.B Note: 
if multiple options are used to both enable and disable a
feature, then 
.B both
the enable and disable commands will be issued.  The enable command
will always be issued
.B before
the corresponding disable command.
.TP
.B \-s VALUE, \-\-smart=VALUE 
Enables or disables SMART on device.  The valid arguments to
this option are \fIon\fP and \fIoff\fP.  Note that the command '\-s on'
(perhaps used with with the '\-o on' and '\-S on' options) should be placed
in a start-up script for your machine, for example in rc.local or rc.sysinit.
In principle the SMART feature settings are preserved over
power-cycling, but it doesn't hurt to be sure. It is not necessary (or
useful) to enable SMART to see the TapeAlert messages.
.TP
.B \-o VALUE, \-\-offlineauto=VALUE
Enables or disables SMART automatic offline test, which scans the drive
every four hours for disk defects. This command can be given during normal
system operation.  The valid arguments to this option are \fIon\fP
and \fIoff\fP.

Note that the SMART automatic offline test command is listed as 'Obsolete'
in every version of the ATA and ATA/ATAPI Specifications
that I can find.  However it is implemented and used by some
vendors. [Good documentation can be found in IBM's Official
Published Disk Specifications.  For example the IBM Travelstar 40GNX
Hard Disk Drive Specifications (Revision 1.1, 22 April 2002,
Publication # 1541, Document S07N-7715-02) page 164.]
You can tell if automatic offline testing is supported by seeing if
this command enables and disables it, as indicated by the SMART
capabilities (displayed with '\-c').

SMART provides
.B three basic categories of testing.
The 
.B first category,
called 'online' testing, has no effect on the performance of
the device.  It is turned on by the '\-s on' option.

The 
.B second category of testing
is called 'offline' testing. This type
of test can, in principle, degrade the device performance.  The '\-o on'
option causes this offline testing to be carried out, automatically,
on a regular scheduled basis.  Normally, the disk will suspend
offline testing while disk accesses are taking place, and then
automatically resume it when the disk would otherwise be idle, so in
practice it has little effect.  Note that a one-time offline test can
also be carried out immediately upon receipt of a user command.  See
the '\-t offline' option below, which causes a one-time offline test to be
carried out immediately.

Any errors detected in automatic or immediate offline testing are
reflected in the values of the SMART Attributes; some types of
errors may also appear in the SMART error log. These are visible
with the '\-A' and '\-l error' options respectively.

Some SMART attribute values are updated only during off-line data
collection activities; the rest are updated during normal operation of
the device or during both normal operation and off-line testing.  The
Attribute value table produced by the '\-A' option indicates this in
the UPDATED column.  Attributes of the first type are labeled
"Offline" and Attributes of the second type are labeled "Always".

The 
.B third category of testing
is the 'self' testing.  This third type of
test is only performed (immediately) when a command to run it is
issued.  The '\-t' and '\-X' options can be used to carry out and abort such
self-tests; please see below for further details.

Any errors detected in the self testing will be shown in the
SMART self-test log, which can be examined using the '\-l selftest'
option.

.B Note:
in this manual page, the word 
.B "Test"
is used in connection with the second category 
just described, e.g. for the 'offline' testing.  The words 
.B "Self-test"
are used in connection with the third category.
.TP
.B \-S VALUE, \-\-saveauto=VALUE
Enables or disables SMART autosave of device vendor-specific
Attributes. The valid arguments to this option are \fIon\fP
and \fIoff\fP.  Note that this feature is preserved across disk power
cycles, so you should only need to issue it once.
.TP
.B SMART READ AND DISPLAY DATA OPTIONS:
.TP
.B \-H, \-\-health
Check: Ask the device to report its SMART health status or pending
TapeAlert messages.  SMART status is based on
information that it has gathered from online and offline
tests, which were used to determine/update its
SMART vendor-specific Attribute values. TapeAlert status is obtained
by reading the TapeAlert log page.

If the device reports failing health status, this means
.B either
that the device has already failed, 
.B or 
that it is predicting its own failure within the next 24 hours.  If
this happens, use the '\-a' option to get more information, and
.B get your data off the disk and someplace safe as soon as you can.
.TP
.B \-c, \-\-capabilities
Prints only the generic SMART capabilities.  These show
what SMART features are implemented and how the device will
respond to some of the different SMART commands.  For example it
shows if the device logs errors, if it supports offline surface
scanning, and so on.  If the device can carry out self-tests, this
option also shows the estimated time required to run those tests.

Note that the time required to run the Self-tests (listed in minutes)
are fixed.  However the time required to run the Immediate Offline
Test (listed in seconds) is variable.  This means that if you issue a
command to perform an Immediate Offline test with the '\-t offline' option,
then the time may jump to a larger value and then count down as the
Immediate Offline Test is carried out.  Please see REFERENCES below
for further information about the the flags and capabilities described
by this option.
.TP
.B \-A, \-\-attributes
Prints only the vendor specific SMART Attributes.  The Attributes are
numbered from 1 to 253 and have specific names and ID numbers. For
example Attribute 12 is 'power cycle count': how many times has the
disk been powered up.

Each Attribute has a 'Raw' value, printed under the heading 'RAW_VALUE',
and a 'Normalized' value printed under the heading 'VALUE'.  [Note:
.B smartctl
prints these values in base-10.]  In the example just given, the 'Raw
Value' for Attribute 12 would be the actual number of times that the
disk has been power-cycled, for example 365 if the disk has been
turned on once per day for exactly one year.  Each vendor uses their
own algorithm to convert this Raw value to a Normalized value in the
range from 1 to 254.  Note that
.B smartctl
only reports the different Attribute values and thresholds.  It does
.B not
carry out the conversion between 'Raw' and 'Normalized' values.

Note that the conversion from 'Raw' value to a quantity with physical
units is not specified by the SMART standard. In most cases, the
values printed by
.B smartctl
are sensible.  For example the temperature Attribute generally has its
raw value equal to the temperature in Celsius.  However in some cases
vendors use unusual conventions.  For example the Hitachi disk on my
laptop reports its power-on hours in minutes, not hours. Some IBM
disks track three temperatures rather than one, in their raw values.
And so on.

Each Attribute also has a Threshold value (whose range is 0 to 255)
which is printed under the heading 'THRESH'.  If the Normalized value
is
.B less than or equal to
the Threshold value, then the Attribute is said to have failed.  If
the Attribute is a pre-failure Attribute, then disk failure is
imminent.

Each Attribute also has a 'Worst' value shown under the heading 'WORST'.
This is the smallest (closest to failure) value that the
disk has recorded at any time during its lifetime when SMART  was
enabled.  [Note however that some vendors will have firmware which will
.B increase
the 'Worst' value for some "rate-type" Attributes.]

The Attribute table printed out by 
.B smartctl
also shows the 'TYPE' of the Attribute.  Pre-failure Attributes are
ones which, if less than or equal to their threshold values, indicate
pending disk failure.  Old age, or usage Attributes, are ones which
indicate end-of-product life from old-age or normal aging and wearout,
if the Attribute value is less than or equal to the threshold.

If the Attribute's current Normalized value is <= threshold, then the
\'WHEN_FAILED' column will display 'FAILED NOW!'.  If not, but the
worst recorded value is <= threshold, then this column will display
\'In the past'.

The table column labeled 'UPDATED' shows if the SMART Attribute values
are updated during both normal operation and off-line testing, or only
during offline testing.  The former are labeled 'Always' and the
latter are labeled 'Offline'.

So to summarize: the 'Raw' values are the ones that might have a real
physical interpretation, such as 'Temperature Celsius', 'Hours', or 'Start-Stop Cycles'.  
Each manufacturer converts these, using their
detailed knowledge of the disk's operations and failure modes, to
Normalized Attribute values in the range 1-254.  The worst (lowest
measured) of these Normalized Attribute values is stored on the disk,
along with a Threshold value that the manufacturer has determined will
indicate that the disk is going to fail, or that it has exceeded its
design age or aging limit.
.B smartctl
does not calculate any of these values, it merely reports them from
the SMART data on the disk.

Note that starting with ATA/ATAPI-4, revision 4, the meaning of these
Attribute fields has been made entirely vendor-specific.  However most
ATA/ATAPI-5 disks seem to respect their meaning, so we have retained
the option of printing the Attribute values.
.TP
.B \-l TYPE, \-\-log=TYPE
Prints either the SMART error log or the SMART self-test log.  The
valid arguments to this option are:

.I error
\- prints only the SMART error log.  SMART disks maintain a log of the
most recent five non-trivial errors. For each of these errors, the
disk power-on lifetime at which the error occurred is recorded, as is
the device status (idle, standby, etc) at the time of the error.
Finally, up to the last five commands that preceded the error are also
recorded, along with a timestamp measured in seconds from the start of
the corresponding power cycle.  [Note: this time stamp wraps after
2^32 milliseconds, or 49 days 17 hours 2 minutes and 47.296 seconds.]
The key ATA disk registers are also recorded in the log.  The final
column of the error log is a text-string description of the ATA
command defined by the Command Register (CR) and Feature Register (FR)
values.  Commands that are obsolete in the most current (ATA-7) spec
are listed like this: \fBREAD LONG (w/ retry) [OBS-4]\fP, indicating
that the command became obsolete with or in the ATA-4 specification.

The ATA Specification (ATA-5 Revision 1c, Section 8.41.6.8.2 to be
precise) says \fB"Error log structures shall include UNC errors, IDNF
errors for which the address requested was valid, servo errors, write
fault errors, etc.  Error log data structures shall not include errors
attributed to the receipt of faulty commands such as command codes not
implemented by the device or requests with invalid parameters or
invalid addresses."\fP

.I error [SCSI]
\- prints the error counter log pages for reads, write and verifies.
The verify row is only output if it has an element other than zero.

.I selftest
\- prints only the SMART self-test log.  The disk maintains a log
showing the results of the self tests, which can be run using the
\'\-t' option described below.  For each of the most recent twenty-one
self-tests, the log shows the type of test (short or extended,
off-line or captive) and the final status of the test.  If the test
did not complete successfully, then the percentage of the test
remaining is shown.  The time at which the test took place, measured
in hours of disk lifetime, is also printed.  If any errors were
detected, the Logical Block Address (LBA) of the first error is
printed in hexadecimal notation.

.I selftest [SCSI]
\- the self-test log for a SCSI device has a slightly different format
than for an ATA device.  For each of the most recent twenty
self-tests, it shows the type of test and the status (final or in
progress) of the test. SCSI standards use the terms 'foreground' and
\'background' (rather than ATA's corresponding 'captive' and
\'off-line') and \'short' and 'long' (rather than ATA's corresponding
\'short' and 'extended') to describe the type of the test.  The printed
segment number is only relevant when a test fails in the third or
later test segment.  It identifies the test that failed and consists
of either the number of the segment that failed during the test, or
the number of the test that failed and the number of the segment in
which the test was run, using a vendor-specific method of putting both
numbers into a single byte.  The Logical Block Address (LBA) of the
first error is printed in hexadecimal notation. If provided, the SCSI
Sense Key (SK), Additional Sense Code (ASC) and Additional Sense Code
Qualifier (ASQ) are also printed. The self tests can be run using the
\'\-t' option described below (using the ATA test terminology).

.I directory
\- if the device supports the General Purpose Logging feature set
(ATA-6 and ATA-7 only) then this prints the Log Directory (the log at
address 0).  The Log Directory shows what logs are available and their
length in sectors (512 bytes).  The contents of the logs at address 1
[Summary SMART error log] and at address 6 [SMART self-test log] may
be printed using the previously-described
.I error
and
.I selftest
arguments to this option. [Please note: this is a new, experimental
feature.  We would like to add support for printing the contents of
extended and comprehensive SMART self-test and error logs.  If your
disk supports these, and you would like to assist, please contact the
smartmontools developers.]

.TP
.B \-v N,OPTION, \-\-vendorattribute=N,OPTION
Sets a vendor-specific display OPTION for Attribute N.  This option
may be used multiple times. Valid arguments to this option are:

.I help
\- Prints (to STDOUT) a list of all valid arguments to this option,
then exits.

.I 9,minutes
\- Raw Attribute number 9 is power-on time in minutes.  Its raw value
will be displayed in the form 'Xh+Ym'.  Here X is hours, and Y is
minutes in the range 0-59 inclusive.  Y is always printed with two
digits, for example \'06' or \'31' or '00'.

.I 9,seconds
\- Raw Attribute number 9 is power-on time in seconds.  Its raw value
will be displayed in the form 'Xh+Ym+Zs'.  Here X is hours, Y is
minutes in the range 0-59 inclusive, and Z is seconds in the range
0-59 inclusive.  Y and Z are always printed with two digits, for
example \'06' or \'31' or '00'.

.I 9,halfminutes
\- Raw Attribute number 9 is power-on time, measured in units of 30
seconds.  This format is used by some Samsung disks.  Its raw value
will be displayed in the form 'Xh+Ym'.  Here X is hours, and Y is
minutes in the range 0-59 inclusive.  Y is always printed with two
digits, for example \'06' or \'31' or '00'.

.I 9,temp
\- Raw Attribute number 9 is the disk temperature in Celsius.

.I 192,emergencyretractcyclect
\- Raw Attribute number 192 is the Emergency Retract Cycle Count.

.I 193,loadunload
\- Raw Attribute number 193 contains two values. The first is the
number of load cycles.  The second is the number of unload cycles.
The difference between these two values is the number of times that
the drive was unexpectedly powered off (also called an emergency
unload). As a rule of thumb, the mechanical stress created by one
emergency unload is equivalent to that created by one hundred normal
unloads.

.I 194,10xCelsius
\- Raw Attribute number 194 is ten times the disk temperature in
Celsius.  This is used by some Samsung disks (example: model SV1204H
with RK100-13 firmware).

.I 194,unknown
\- Raw Attribute number 194 is NOT the disk temperature, and its
interpretation is unknown. This is primarily useful for the -P
(presets) option.

.I 198,offlinescanuncsectorct
\- Raw Attribute number 198 is the Offline Scan UNC Sector Count.

.I 200,writeerrorcount
\- Raw Attribute number 200 is the Write Error Count.

.I 201,detectedtacount
\- Raw Attribute number 201 is the Detected TA Count.

.I 220,temp
\- Raw Attribute number 220 is the disk temperature in Celsius.

Note: a table of hard drive models, listing which Attribute
corresponds to temperature, can be found at:
http://coredump.free.fr/linux/hddtemp.db

.I N,raw8
\- Print the Raw value of Attribute N as six 8-bit unsigned base-10
integers.  This may be useful for decoding the meaning of the Raw
value.  The form 'N,raw8' prints Raw values for ALL Attributes in this
form.  The form (for example) '123,raw8' only prints the Raw value for
Attribute 123 in this form.

.I N,raw16
\- Print the Raw value of Attribute N as three 16-bit unsigned base-10
integers.  This may be useful for decoding the meaning of the Raw
value.  The form 'N,raw16' prints Raw values for ALL Attributes in this
form.  The form (for example) '123,raw16' only prints the Raw value for
Attribute 123 in this form.

.I N,raw48
\- Print the Raw value of Attribute N as a 48-bit unsigned base-10
integer.  This may be useful for decoding the meaning of the Raw
value.  The form 'N,raw48' prints Raw values for ALL Attributes in
this form.  The form (for example) '123,raw48' only prints the Raw
value for Attribute 123 in this form.

.TP
.B \-F TYPE, \-\-firmwarebug=TYPE
Modifies the behavior of
.B smartctl
to compensate for some known and understood device firmware bug.  The
valid arguments to this option are:

.I none
Assume that the device firmware obeys the ATA specifications.  This is
the default.

.I samsung
In some Samsung disks (example: model SV4012H Firmware Version:
RM100-08) some of the two- and four-byte quantities in the SMART data
structures are byte-swapped (relative to the ATA specification).
Enabling this option tells
.B smartctl
to evaluate these quantities in byte-reversed order.  Some signs that
your disk needs this option are (1) no self-test log printed, even
though you have run self-tests; (2) very large numbers of ATA errors
reported in the ATA erorr log; (3) strange and impossible values for
the ATA error log timestamps.

.TP
.B \-P TYPE, \-\-presets=TYPE
Specifies whether
.B smartctl
should use any preset options that are available for this drive. By
default, if the drive is recognized in the smartmontools database,
then the presets are used.

.B smartctl
can automatically set appropriate options for known drives.  For
example, the Maxtor 4D080H4 uses Attribute 9 to stores power-on time
in minutes whereas most drives use that Attribute to store the
power-on time in hours.  The command-line option '-v 9,minutes'
ensures that
.B smartctl
correctly interprets Attribute 9 in this case, but that option is
preset for the Maxtor 4D080H4 and so need not be specified by the user
on the
.B smartctl
command line.

The argument
.I show
will show any preset options for your drive and the argument
.I showall
will show all known drives in the smartmontools database, along with
their preset options.  If there are no presets for your drive and you
think there should be (for example, a \-v or \-F option is needed to
get
.B smartctl
to display correct values) then please contact the
.B smartmontools
developers so that this information can be added to the smartmontools
database.  Contact information is at the end of this man page.

The valid arguments to this option are:

.I use
\- if a drive is recognized, then use the stored presets for it.  This
is the default. Note that presets will NOT over-ride additional
Attribute interpretation ('-v N,something') command-line options.

.I ignore
\- do not use presets.

.I show
\- show if the drive is recognized in the database, and if so, its
presets, then exit.

.I showall
\- list all recognized drives, and the presets that are set for them,
then exit.

.TP
.B SMART RUN/ABORT OFFLINE TEST AND SELF-TEST OPTIONS:
.TP
.B \-t TEST, \-\-test=TEST
Executes TEST immediately.  The '\-C' option can be used in
conjunction with this option to run the short or long (and also for ATA
devices,
\# selective or
conveyance) self-tests in captive mode (known
as 'foreground mode' for SCSI devices).  Note that only one test can be
run at a time, so this option should only be used once per command
line.

The valid arguments to this option are:  

.I offline
\- runs SMART Immediate Offline Test.  This immediately
starts the test described above.  This command can be given during
normal system operation.  The effects of this test are visible only in
that it updates the SMART Attribute values, and if errors are
found they will appear in the SMART error log, visible with the '\-l error'
option. [In the case of SCSI devices runs the default self test in
foreground. No entry is placed in the self test log.]

If the '\-c' option to
.B smartctl
shows that the device has the "Suspend Offline collection upon new
command" capability then you can track the progress of the Immediate Offline
test using the '\-c' option to
.B smartctl.
If the '\-c' option show that the device has the "Abort Offline
collection upon new command" capability then most commands will abort
the Immediate Offline Test, so you should not try to track the
progress of the test with '\-c', as it will abort the test.

.I short
\- runs SMART Short Self Test (usually under ten minutes).
[Note: in the case of SCSI devices,
this command option runs the 'Background short' self-test.]
This command can be given during normal system operation (unless run in
captive mode \- see the '\-C' option below).  This is a
test in a different category than the immediate or automatic offline
tests.  The 'Self' tests check the electrical and mechanical
performance as well as the read performance of the disk.  Their
results are reported in the Self Test Error Log, readable with
the '\-l selftest' option.  Note that on some disks the progress of the
self-test can be monitored by watching this log during the self-test; with other disks
use the '\-c' option to monitor progress.

.I long
\- runs SMART Extended Self Test (tens of minutes).
[Note: in the case of SCSI devices,
this command option runs the 'Background long' self-test.]
This is a
longer and more thorough version of the Short Self Test described
above.  Note that this command can be given during normal
system operation (unless run in captive mode \- see the '\-C' option below).

.I conveyance
\- [ATA ONLY] runs a SMART Conveyance Self Test (minutes).  This self-test routine
is intended to identify damage incurred during transporting of the
device. This self-test routine should take on the order of minutes to
complete.  Note that this command can be given during normal system
operation (unless run in captive mode \- see the '\-C' option below).

\#.I selective
\#\- [ATA ONLY: \fBNOT YET IMPLEMENTED\fP] runs a SMART Selective Self Test.
\#This self-test routine is intended to check specific ranges of disk
\#Logical Block Addresses (LBAs).  Each range that is checked is called
\#a "span".  Each span is specified by a starting LBA and an ending LBA.
\#Up to 5 spans can be specified.  Note that this command can be given
\#during normal system operation (unless run in captive mode \- see
\#the '\-C' option below).

.TP
.B \-C, \-\-captive
Runs self-tests in captive mode.  This has no effect with '\-t
offline' or if the '\-t' option is not used. [Note: in the case of
SCSI devices, this command option runs the self-test in 'Foreground'
mode.]

.B WARNING: Tests run in captive mode may busy out the drive for the length
.B of the test.  Only run captive tests on drives without any mounted partitions!

.TP
.B \-X, \-\-abort
Aborts non-captive SMART Self Tests.  Note that this
command will abort the Offline Immediate Test routine only if your
disk has the "Abort Offline collection upon new command" capability.
.PP
.SH EXAMPLES
.nf
.B smartctl \-a /dev/hda
.fi
Print all SMART information for drive /dev/hda (Primary Master).
.PP
.nf
.B smartctl \-s off /dev/hdd
.fi
Disable SMART on drive /dev/hdd (Secondary Slave).
.PP
.nf
.B smartctl \-\-smart=on \-\-offlineauto=on \-\-saveauto=on /dev/hda
.fi
Enable SMART on drive /dev/hda, enable automatic offline
testing every four hours, and enable autosaving of
SMART Attributes.  This is a good start-up line for your system's
init files.  You can issue this command on a running system.
.PP
.nf
.B smartctl \-t long /dev/hdc
.fi
Begin an extended self-test of drive /dev/hdc.  You can issue this
command on a running system.  The results can be seen in the self-test
log visible with the '\-l selftest' option after it has completed.
.PP
.nf
.B smartctl \-s on \-t offline /dev/hda
.fi
Enable SMART on the disk, and begin an immediate offline test of
drive /dev/hda.  You can issue this command on a running system.  The
results are only used to update the SMART Attributes, visible
with the '\-A' option.  If any device errors occur, they are logged to
the SMART error log, which can be seen with the '\-l error' option.
.PP
.nf
.B smartctl \-A \-v 9,minutes /dev/hda
.fi
Shows the vendor Attributes, when the disk stores its power-on time
internally in minutes rather than hours.
.PP
.nf
.B smartctl \-q errorsonly \-H \-l selftest /dev/hda
.fi
Produces output only if the device returns failing SMART status,
or if some of the logged self-tests ended with errors.
.PP
.nf
.B smartctl \-q silent \-a /dev/hda
.fi
Examine all SMART data for device /dev/hda, but produce no
printed output.  You must use the exit status (the
.B $?
shell variable) to learn if any Attributes are out of bound, if the
SMART status is failing, if there are errors recorded in the
self-test log, or if there are errors recorded in the disk error log.

.PP
.SH RETURN VALUES
The return values of smartctl are defined by a bitmask.  For the
moment this only works on ATA disks.  The different bits in the return
value are as follows:
.TP
.B Bit 0:
Command line did not parse.
.TP
.B Bit 1:
Device open failed, or device did not return an IDENTIFY DEVICE structure. 
.TP
.B Bit 2:
Some SMART command to the disk failed, or there was a checksum error
in a SMART data structure (see '\-b' option above).
.TP
.B Bit 3:
SMART status check returned "DISK FAILING".
.TP
.B Bit 4:
SMART status check returned "DISK OK" but we found prefail Attributes <= threshold.
.TP
.B Bit 5:
SMART status check returned "DISK OK" but we found that some (usage
or prefail) Attributes have been <= threshold at some time in the
past. 
.TP
.B Bit 6:
The device error log contains records of errors.
.TP
.B Bit 7:
The device self-test log contains records of errors.

To test within the shell for whether or not the different bits are
turned on or off, you can use the following type of construction (this
is bash syntax):
.nf
.B smartstat=$(($? & 8))
.fi
This looks at only at bit 3 of the exit status
.B $?
(since 8=2^3).  The shell variable
$smartstat will be nonzero if SMART status check returned 'disk
failing' and zero otherwise.

.PP
.SH NOTES
The TapeAlert log page flags are cleared for the initiator when the page is read. This
means that each alert condition is reported only once by
.B smartctl
for each initiator for each activation of the condition.

.PP
.SH AUTHOR
Bruce Allen
.B smartmontools-support@lists.sourceforge.net
.fi
University of Wisconsin \- Milwaukee Physics Department

.PP
.SH CREDITS
.fi
This code was derived from the smartsuite package, written by Michael
Cornwell, and from the previous ucsc smartsuite package.  It extends
these to cover ATA-5 disks.  This code was originally developed as a
Senior Thesis by Michael Cornwell at the Concurrent Systems Laboratory
(now part of the Storage Systems Research Center), Jack Baskin School
of Engineering, University of California, Santa
Cruz. http://ssrc.soe.ucsc.edu/.
.SH
HOME PAGE FOR SMARTMONTOOLS: 
.fi
Please see the following web site for updates, further documentation, bug
reports and patches:
.nf
.B
http://smartmontools.sourceforge.net/

.SH
SEE ALSO:
.B
smartd (8)
.SH
REFERENCES FOR SMART
.fi
If you would like to understand better how SMART works, and what
it does, a good place to start is  Section 8.41 of the 'AT
Attachment with Packet Interface-5' (ATA/ATAPI-5) specification.  This
documents the SMART functionality which the smartmontools
utilities provide access to.  You can find Revision 1 of this document
at \fBhttp://www.t13.org/project/d1321r1c.pdf\fP .

.fi
Future versions of the specifications (ATA/ATAPI-6 and ATA/ATAPI-7),
and later revisions (2, 3) of the ATA/ATAPI-5 specification are
available from \fBhttp://www.t13.org/#FTP_site\fP .

.fi
The functioning of SMART was originally defined by the SFF-8035i
revision 2 and the SFF-8055i revision 1.4 specifications.  These are
publications of the Small Form Factors (SFF) Committee.  Links to
these documents may be found in the References section of the
smartmontools home page at \fBhttp://smartmontools.sourceforge.net/\fP .

.SH
CVS ID OF THIS PAGE:
$Id: smartctl.8,v 1.75 2003/07/22 14:08:58 ballen4705 Exp $
