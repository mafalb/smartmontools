#
# $Id: configure.in,v 1.6 2003/09/30 14:01:11 guidog Exp $
#
dnl Process this file with autoconf to produce a configure script.
AC_PREREQ(2.50)
AC_INIT(smartd.c)
AM_CONFIG_HEADER(config.h)
AM_INIT_AUTOMAKE(smartmontools, 5.19)
AM_MAINTAINER_MODE

AC_LANG_C
dnl Checks for programs.
AC_PROG_CC
AC_PROG_INSTALL

dnl Checks for libraries.

dnl Checks for header files.
AC_CHECK_HEADER([getopt.h])
dnl AC_CHECK_HEADER([linux/hdreg.h],, [AC_MSG_ERROR([Need linux/hdreg.h])])

dnl Checks for typedefs, structures, and compiler characteristics.

dnl Checks for library functions.
AC_CHECK_FUNCS([getopt])
AC_CHECK_FUNCS([getopt_long])

AC_SUBST(CFLAGS)
AC_SUBST(CPPFLAGS)
AC_SUBST(LDFLAGS)

AC_PREFIX_DEFAULT(['/usr'])
AC_SUBST([docdir], ['${prefix}/share/doc/${PACKAGE}-${VERSION}'])
AC_SUBST([exampledir], ['${docdir}/examplescripts'])

AC_ARG_WITH(initscriptdir,[AC_HELP_STRING([--with-initscriptdir=dir],[Location of init scripts (default is ${prefix}/etc/rc.d/init.d)])],[initddir="$withval"],[initddir="${prefix}/rc.d/init.d"])
AC_SUBST(initddir)

dnl no prefix set, so default to /etc
if test "$prefix" = "NONE"; then
    AC_SUBST([sysconfdir], ['/etc'])
    dnl no prefix and no mandir, so use ${prefix}/share/man as default
    if test "$mandir" = "${prefix}/man"; then
    	AC_SUBST([mandir], ['${prefix}/share/man'])
    fi
fi

AC_OUTPUT(Makefile examplescripts/Makefile)
